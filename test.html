<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JW Player Example</title>
    <script src="https://cdn.jwplayer.com/libraries/your-library-key.js"></script>
</head>
<body>
    <div id="myPlayer"></div>

    <script>
        // Replace with your actual API endpoint and ID
        const apiUrl = 'https://yourapi.com/getStream?id=yourId';

        async function fetchM3U8() {
            try {
                const response = await fetch(apiUrl);
                if (!response.ok) throw new Error('Network response was not ok');
                const data = await response.json();
                
                // Assuming the M3U8 URL is in the "url" property of the response
                const m3u8Url = data.url;

                // Initialize JW Player
                jwplayer("myPlayer").setup({
                    file: m3u8Url,
                    width: '100%',
                    height: '100%',
                    type: 'hls' // Specify the type as HLS
                });
            } catch (error) {
                console.error('Error fetching M3U8:', error);
            }
        }

        // Fetch the M3U8 URL when the page loads
        fetchM3U8();
    </script>
</body>
</html>
